<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="img/lighthouse.ico" type="image/x-icon">
<title>Одесские баранки.&nbsp;¯\_(ツ)_/¯</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta naame="author" content="текст Вадим Сиротенко, художник Ирина Бабиченко">
<style>
html {
	height: 100%;
	width: 100%;
	min-height:100%;	
}
	body {
	height: 100%;
	width: 100%;
	min-height:100%;
	margin: 0;
	top: 0px;
	left: 0px;
	background-size: contain;
	background-position-x: center;
	background-position-y: top;
	background-repeat: no-repeat;
	background-attachment: fixed;
	background-image: url('img/1.jpg');
}
.ctrl {
/*	display: inline; */
	margin: 0 auto;
	position: absolute;
	text-align: center;
	bottom: 10px;
}
.arroundleft {
	padding-top: 23%;
	float: left;
	margin: 15px;
	border-style: none;
	cursor: pointer;
}
.arroundright {
	padding-top: 23%;
	float: right;
	margin: 15px;
	border-style: none;
	cursor: pointer;
}
.arrows_right {
	height: 5%;
	width: auto;
}
.arrows_left {
	height: 5%;
	width: auto;
}
.textstory {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: #e4e4e4;
    overflow: auto;
    transition: 0.5s;
    padding-top: 2%;
}
.textstory .closebtn {
    position: absolute;
    top: 0;
    right: 0px;
    font-size: 36px;
    margin-left: 25px;
    background-color: #d50000;
    color: #fffbfb;
    font-weight: 900;
    text-decoration: none;
    text-shadow: 2px 2px 2px #c6c4c4, 0 0 1em #c7c5c5;
}
.sidenav {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: #e4e4e4;
    overflow: auto;
    transition: 0.5s;
    padding-top: 2%;
}
.sidenav .closebtn {
    position: absolute;
    top: 0;
    right: 0px;
    font-size: 36px;
    margin-left: 25px;
    background-color: #d50000;
    color: #fffbfb;
    font-weight: 900;
    text-decoration: none;
    text-shadow: 2px 2px 2px #c6c4c4, 0 0 1em #c7c5c5;
}
.sidenav p {
    padding: 2px 5px 5x 15px;
    text-decoration: none;
    font-size: 25px;
    color: #818181;
    display: block;
    transition: 0.3s;
}
.reader_age {
	position: absolute;
	bottom: 10px;
	right: 0%;
	display: inline-block;
	margin: 10px;
	padding: 4px;
	outline: 1px solid #fff;
	font-size: 32px;
	font-weight: bold;
	color: #ff0000;
	border: 3px solid black;
	border-radius: 50% 50% 50% 50%;
	cursor: pointer;
}
@media screen and (max-height: 100%) {
	.sidenav {padding-top: 15px;}
	.sidenav a {font-size: 18px;}
}
</style>
<script>
var max_idx=43;
var idx=1;
function getCookie(name) {
//	return document.cookie.replace(/(?:(?:^|.*;\s*)page\s*\=\s*([^;]*).*$)|^.*$/, "$1");
	alert(name+'='+document.cookie.replace('/(?:(?:^|.*;\s*)'+name+'\s*\=\s*([^;]*).*$)|^.*$/, "$1"'));
	return document.cookie.replace('/(?:(?:^|.*;\s*)'+name+'\s*\=\s*([^;]*).*$)|^.*$/, "$1"');
}
function setCookie(name, value) {
	document.cookie = name + '=' + value + '; max-age='+3600*24*31;
}
function changeStory(arg){
	idx=idx+(parseInt(arg));
	if(idx<1)idx=max_idx;
	if(idx>max_idx)idx=1;
	document.body.style.backgroundImage = 'url(' + 'img/'+idx+'.jpg' + ')';
	document.getElementById('story').src='audio/'+idx+'.wav';
	document.getElementById('showText').src = 'text/'+idx+'.txt';
	if(document.getElementById('autoplay').src.indexOf('start.png')>0) {
		document.getElementById('story').pause();
	}else{
		document.getElementById('story').play();
	};
	setCookie('page', idx);
};
var handler = {
    handleEvent: function(e){changeStory(1)}
};
function getAutoPlay(){
	if(document.getElementById('autoplay').src.indexOf('start.png')>0) {
		document.getElementById('autoplay').src='img/stop.png';
		document.getElementById('autoplay').title='Выключить автоматическое проигрывание';
		document.getElementById('story').addEventListener("ended", handler, true);
		document.getElementById('story').play();
	}else{
		document.getElementById('autoplay').src='img/start.png';
		document.getElementById('autoplay').title='Включить автоматическое проигрывание';
		document.getElementById('story').removeEventListener("ended", handler, true);
	};
}
</script>
</head>
<body id="pictIB">
<span style="font-size:33px; cursor:pointer; position: absolute; top: 2%; left: 2%;" title="Об авторах" onclick="openNav('mySidenav')">&#9786;</span>
<span style="font-size:30px; cursor:pointer; position: absolute; top: 12%; left: 2%;" title="Помощь" onclick="openNav('manage')">☰</span>
<span style="font-size:33px; cursor:pointer; position: absolute; top: 2%; right: 2%; font-weight: 600;" title="Текст" onclick="openNav('textstory')">&#9998;</span>
<span class="reader_age"  title="В тексте рассказов встречается обсценная лексика (матершинка&#9786;)" onclick="openNav('manage')">18+</span>
<div id="manage" class="sidenav">
	<a href="javascript:void(0)" class="closebtn" onclick="closeNav('manage')" title="Закрыть">&nbsp;×&nbsp;</a>
	<p>
	Для листания картинок: 
	<br />На устройствах с клавиатурой можно пользоваться стрелочками клавиатуры: вправо или влево;
	<br />На устройствах с сенсорным экраном для листания вперёд/назад достаточно провести пальцем по экрану вправо или влево;
	</p>
	<p>Рассказик можно послушать, а можно прочитать:
	<br />Кнопочка справа вверху <span style="font-weight: 700;">&#9998;</span> открывает окошко с текстом.
	</p>
	<p>
	Прослушивание записанного рассказа.<br />
	Внизу страницы расположена панель аудио-проигрывателя:
	<img src="img/player.png" style="height: 36px; width: auto;">
	<br />Справа от проигрывателя кнопка <img src="img/start.png" style="display: inline; margin-left: 3px; margin-right: 3px;"> позволяющая включить автопрокрутку картинок с чтением рассказика вслух.
	</p>
	<p>Во многих рассказах, как, впрочем, и в жизни, мы таки часто услышим матершинку, а сие нежелательно для детей до 18 лет... Поэтому мы таки рекомендуем не врубать громкость так, чтобы оно орало на весь район!</p>
</div>
<div id="mySidenav" class="sidenav">
	<a href="javascript:void(0)" class="closebtn" onclick="closeNav('mySidenav')" title="Закрыть">&nbsp;×&nbsp;</a>
	<div style="display: table-row; left: 0px; width: 100%;">
	<p>Немножко об авторах:</p><p>
  	<img src="img/Babichenko.jpg" style="left: 0px; float: left; margin: 5px; width: 25%; height: auto;" title="Автопортрет Иры">
  	Автор рисунков одесский художник Ирина Бабиченко
  	<br/>Страница Ирины в сети <a href="https://www.facebook.com/profile.php?id=100012223688631" target="_blank">Facebook</a>
  	<br/>Свободные картины Ирины можно у неё же приобрести, написав ей на <a href="mailto:ira4272@gmail.com" target="_blank">почту</a>.
  	</p>
	</div>
	<div style="display: table-row; left: 0px; width: 100%;">
	<p>
	<img src="img/swa.jpg" style="left: 0px; float: left; margin: 5px; width: 25%; height: auto;" title="Подарок художника из Венгрии Елены Андерсовой">
	Автор текстов и создатель этого сайта Вадим Сиротенко, г.Свердловск.
	<br/>Страница Вадима в том же <a href="https://www.facebook.com/feist.vadim" target="_blank">Facebook</a>
	<br/>Мне можно писать на <a href="mailto:sirotenkovadim@gmail.com" target="_blank">почту</a>.
	</p>
	</div>
</div>
<div id="textstory" class="sidenav">
	<a href="javascript:void(0)" class="closebtn" onclick="closeNav('textstory')" title="Закрыть">&nbsp;×&nbsp;</a>
	<iframe id="showText" frameborder="no" seamless width="100%" height="85%" style="font-size:14px;" src=""></iframe>
</div>
<div class="ctrl">
	<audio id="story" src="audio/1.wav" controls="true" controlsList="nodownload"></audio>
	<img id="autoplay" style="float: right; margin-top: 2%;" src="img/start.png" onclick="getAutoPlay()" title="Включить автоматическое проигрывание">
</div>
<!--
<div id="arrow_right" class="arroundright"><img id="tuda" class="arrows_right" src="img/nose_right.png" title="Тудой!" onclick="changeStory('+1');"></div>
<div id="arrow_left" class="arroundleft"><img id="suda" class="arrows_left" src="img/nose_left.png" title="Сюдой!" onclick="changeStory('-1');"></div>
-->
<script>
var page = parseInt(getCookie('page'));
if(isNaN(page) || page === undefined){
	idx=1;
}else{
	idx=page;
};
document.body.style.backgroundImage = 'url(' + 'img/'+idx+'.jpg' + ')';
document.getElementById('story').src='audio/'+idx+'.wav';
document.getElementById('story').pause();
document.getElementById('showText').src = 'text/'+idx+'.txt';

function openNav(win) {
	document.getElementById(win).style.width = "43%";
}
function closeNav(win) {
	document.getElementById(win).style.width = "0%";
}
function goPage(e){
	switch(e.keyCode){
		case 37:
			changeStory('-1');
            break;
		case 38:
			changeStory('-1');
			break;
		case 39:
			changeStory('+1');
			break;
		case 40:
			changeStory('+1');
			break;
	};
}

var startX, stopX, startY, stopY;
 
function turn_start(event) {
	startX = event.touches[0].pageX;
}
function turn_page(event) {
	stopX = event.changedTouches[0].pageX;
	stopY = event.changedTouches[0].pageY;
	let moveX = stopX-startX;
	if (Math.abs(moveX)<20) { return false; };
	if (moveX<0) {
		changeStory('-1');
	} else {
		changeStory('+1');
	};
}

var isHelpShowe = parseInt(getCookie('showe'));
if(isNaN(isHelpShowe) || isHelpShowe === undefined){
	openNav('manage');
	setCookie('showe',1);	
};
var hand = document.getElementsByTagName('body')[0];
hand.addEventListener('keydown', goPage, false);
hand.addEventListener('touchstart', turn_start, false); 
hand.addEventListener('touchend', turn_page, false);
</script>
</body>
</html>
