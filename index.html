<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="img/lighthouse.ico" type="image/x-icon">
<title>Одесские баранки.&nbsp;¯\_(ツ)_/¯</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="author" content="текст Вадим Сиротенко, художник Ирина Бабиченко">
<meta property="og:url" content="https://odesskiebaranki.github.io/" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Одесские баранки" />
<meta property="og:description" content="Дурашливые истории" />
<meta property="og:image" content="https://odesskiebaranki.github.io/img/oldlighthouse.jpg" />
<style>
html {
	height: 100%;
	width: 100%;
	min-height:100%;	
}
	body {
	height: 100%;
	width: 100%;
	min-height:100%;
	margin: 0;
	top: 0px;
	left: 0px;
	background-size: contain;
	background-position-x: center;
	background-position-y: top;
	background-repeat: no-repeat;
	background-attachment: fixed;
	background-image: url('img/1.jpg');
}
.ctrl {
/*	display: inline; */
	margin: 0 auto;
	position: absolute;
	text-align: center;
	bottom: 10px;
}
.arroundleft {
	padding-top: 23%;
	float: left;
	margin: 15px;
	border-style: none;
	cursor: pointer;
}
.arroundright {
	padding-top: 23%;
	float: right;
	margin: 15px;
	border-style: none;
	cursor: pointer;
}
.arrows_right {
	height: 5%;
	width: auto;
}
.arrows_left {
	height: 5%;
	width: auto;
}
.textstory {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: #e4e4e4;
    overflow: auto;
    transition: 0.5s;
    padding-top: 2%;
}
.textstory .closebtn {
    position: absolute;
    top: 0;
    right: 0px;
    font-size: 36px;
    margin-left: 25px;
    background-color: #d50000;
    color: #fffbfb;
    font-weight: 900;
    text-decoration: none;
    text-shadow: 2px 2px 2px #c6c4c4, 0 0 1em #c7c5c5;
}
.sidenav {
    height: 96%;
    width: 0;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: #e4e4e4;
    overflow: auto;
    transition: 0.5s;
    padding-top: 2%;
    resize: horizontal;
    cursor: auto;
}
.sidenav .closebtn {
    position: absolute;
    top: 0;
    right: 0px;
    font-size: 36px;
    margin-left: 25px;
    background-color: #d50000;
    color: #fffbfb;
    font-weight: 900;
    text-decoration: none;
    text-shadow: 2px 2px 2px #c6c4c4, 0 0 1em #c7c5c5;
}
.sidenav p {
/*    padding: 8px 8px 8x 32px;*/
    padding: 2px 5px 5x 15px;
    text-decoration: none;
    font-size: 25px;
    color: #818181;
    display: block;
    transition: 0.3s;
}
.reader_age {
	position: absolute;
	bottom: 10px;
	right: 0%;
/*	display: inline-block;*/
	margin: 10px;
	padding: 4px;
	outline: 1px solid #fff;
	font-size: 32px;
	font-weight: bold;
	color: #ff0000;
	border: 3px solid black;
	border-radius: 50% 50% 50% 50%;
	cursor: pointer;
}
.tmp_info {
	position: absolute;
	bottom: 15px;
	border: 3px;
	right: 15%;
}
@media screen and (max-height: 100%) {
	.sidenav {padding-top: 15px;}
	.sidenav a {font-size: 18px;}
}
</style>
</head>
<script>
document.oncontextmenu = function (){return false};
var max_idx=43;
var idx=1;
function getCookie(name) {
	let matches = document.cookie.match(new RegExp(
		"(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
	));
	return matches ? decodeURIComponent(matches[1]) : undefined;
}
function setCookie(name, value) {
	document.cookie = name + '=' + value + '; max-age='+3600*24*31;
}
function changeStory(arg){
	idx=idx+(parseInt(arg));
	if(idx<1)idx=max_idx;
	if(idx>max_idx)idx=1;
	document.body.style.backgroundImage = 'url(' + 'img/'+idx+'.jpg' + ')';
	document.getElementById('story').src='audio/'+idx+'.wav';
	document.getElementById('showText').src = 'text/'+idx+'.txt';
	document.getElementById('fblike').setAttribute('data-href', 'https://odesskiebaranki.is/img/'+idx+'.jpg');
	if(document.getElementById('autoplay').src.indexOf('start.png')>0) {
		document.getElementById('story').pause();
	}else{
		document.getElementById('story').play();
	};
	setCookie('page', idx);
};
var handler = {
    handleEvent: function(e){changeStory(1)}
};
function getAutoPlay(){
	if(document.getElementById('autoplay').src.indexOf('start.png')>0) {
		document.getElementById('autoplay').src='img/stop.png';
		document.getElementById('autoplay').title='Выключить автоматическое проигрывание';
		document.getElementById('story').addEventListener("ended", handler, true);
		document.getElementById('story').play();
	}else{
		document.getElementById('autoplay').src='img/start.png';
		document.getElementById('autoplay').title='Включить автоматическое проигрывание';
		document.getElementById('story').removeEventListener("ended", handler, true);
	};
}
</script>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v5.0&appId=1559991960821213&autoLogAppEvents=1"></script>
</head>
<body id="pictIB">
<span style="font-size:33px; cursor:pointer; position: absolute; top: 12%; left: 2%;" title="Об авторах" onclick="openNav('mySidenav')">&#9786;</span>
<span style="font-size:30px; cursor:pointer; position: absolute; top: 2%; left: 2%;" title="Помощь" onclick="openNav('manage')">☰</span>
<span style="font-size:33px; cursor:pointer; position: absolute; top: 2%; right: 2%; font-weight: 600;" title="Текст" onclick="openNav('textstory')">&#9998;</span>
<div id="fblike" style="position: absolute; bottom: 25px; right: 4%; font-weight: 600;" class="fb-like" data-href="https://odesskiebaranki.github.io/" data-width="" data-layout="button" data-action="like" data-size="small" data-share="true"></div>
<span class="reader_age" title="В тексте рассказов встречается обсценная лексика (матершинка&#9786;)" onclick="openNav('mat')">18+</span>
<div id="manage" class="sidenav">
	<a href="javascript:void(0)" class="closebtn" onclick="closeNav('manage')" title="Закрыть">&nbsp;×&nbsp;</a>
	<p>Для листания картинок:
	<br />На устройствах с клавиатурой можно пользоваться стрелочками клавиатуры: вправо или влево; или, нажав на мышке левую кнопку, 
	провести мышкой вправо("пролистнуть" вперёд) или влево (назад).</p>
	<p>На устройствах с сенсорным экраном для листания вперёд/назад достаточно провести пальцем по экрану вправо или влево.</p>
	<p>Рассказик можно послушать, а можно прочитать:
	<br />Кнопочка справа вверху <span style="font-weight: 700;">&#9998;</span> открывает окошко с текстом.
	</p>
	<p>
	Прослушивание записанного рассказа.<br />
	Внизу страницы расположена панель аудио-проигрывателя:
	<img src="img/player.png" style="height: 36px; width: auto;">
	<br />Справа от проигрывателя кнопка <img src="img/start.png" style="display: inline; margin-left: 3px; margin-right: 3px;"> позволяющая включить автопрокрутку картинок с чтением рассказика вслух.
	</p>
</div>
<div id="mySidenav" class="sidenav">
	<a href="javascript:void(0)" class="closebtn" onclick="closeNav('mySidenav')" title="Закрыть">&nbsp;×&nbsp;</a>
	<div style="display: table-row; left: 0px; width: 100%;">
	<p>Немножко об авторах:</p><p>
  	<img src="img/Babichenko.jpg" style="left: 0px; float: left; margin: 5px; width: 25%; height: auto;" title="Автопортрет Иры">
  	Автор рисунков одесский художник Ирина Бабиченко
  	<br/>Страница Ирины в сети <a href="https://www.facebook.com/profile.php?id=100012223688631" target="_blank">Facebook</a>
  	<br/>Свободные картины Ирины можно у неё же приобрести, написав ей на <a href="mailto:ira4272@gmail.com" target="_blank">почту</a>.
  	</p>
	</div>
	<div style="display: table-row; left: 0px; width: 100%;">
	<p>
	<img src="img/swa.jpg" style="left: 0px; float: left; margin: 5px; width: 25%; height: auto;" title="Подарок художника из Венгрии Елены Андерсовой">
	Автор текстов и создатель этого сайта Вадим Сиротенко, г.Свердловск.
	<br/>Другие рассказики можно поглядеть на <a href="https://www.tumblr.com/blog/wadimsirotenko" target="_blank">"тумблере"<a/>
	<br/>Мне можно писать на <a href="mailto:sirotenkovadim@gmail.com" target="_blank">почту</a>.
	</p>
	</div>
</div>
<div id="mat" class="sidenav">
	<a href="javascript:void(0)" class="closebtn" onclick="closeNav('mat')" title="Закрыть">&nbsp;×&nbsp;</a>
	<p>Так-как тырнетный сайт считается за средство массовой информации, то велено указывать на какой возраст оно, в смысле, СМИ, рассчитано.</p>
	<p></p>
	<p>Во многих рассказах, как, впрочем, и в жизни, мы таки часто услышим матершинку, а сие нежелательно для детей до 18 лет... Поэтому мы таки рекомендуем не врубать громкость так, чтобы оно орало на весь район!</p>
	<p>Дык вот из-за наличия матершинки наш сайтик рассчитан на возраст&nbsp;<span style="font-weight: bold; color: #ff0000;">18+</span></p>
</div>
<div id="textstory" class="sidenav">
	<a href="javascript:void(0)" class="closebtn" onclick="closeNav('textstory')" title="Закрыть">&nbsp;×&nbsp;</a>
	<iframe id="showText" frameborder="no" seamless width="100%" height="85%" style="font-size:14px;" src=""></iframe>
</div>
<div id="tmp" class="tmp_info"></div>
<div class="ctrl">
	<audio id="story" src="audio/1.wav" controls="true" controlsList="nodownload"></audio>
	<img id="autoplay" style="float: right; margin-top: 2%;" src="img/start.png" onclick="getAutoPlay()" title="Включить автоматическое проигрывание">
</div>
<script>
var page = parseInt(getCookie('page'));
if(isNaN(page) || page === undefined){
	idx=1;
}else{
	idx=page;
};
document.body.style.backgroundImage = 'url(' + 'img/'+idx+'.jpg' + ')';
document.getElementById('story').src='audio/'+idx+'.wav';
document.getElementById('story').pause();
document.getElementById('showText').src = 'text/'+idx+'.txt';
function openNav(win) {
	document.getElementById(win).style.width = "43%";
	let hand = document.getElementsByTagName('body')[0];
	hand.removeEventListener('touchstart', turn_start, false); 
	hand.removeEventListener('touchend', turn_page, false);
	hand.removeEventListener('mousedown', mouseStart, false);
	hand.removeEventListener('mouseup',mouseStop,false);
	hand.removeEventListener('keydown', goPage, false);
}
function closeNav(win) {
	document.getElementById(win).style.width = "0%";
	let hand = document.getElementsByTagName('body')[0];
	hand.addEventListener('touchstart', turn_start, false); 
	hand.addEventListener('touchend', turn_page, false);
	hand.addEventListener('mousedown', mouseStart, false);
	hand.addEventListener('keydown', goPage, false);
}
function goPage(e){
	switch(e.keyCode){
		case 37:
			changeStory('-1');
            break;
		case 38:
			changeStory('-1');
			break;
		case 39:
			changeStory('+1');
			break;
		case 40:
			changeStory('+1');
			break;
	};
}
var startX, stopX, startY, stopY;
 
function turn_start(event) {
	startX = event.touches[0].pageX;
//	startY = event.touches[0].pageY;
}
function turn_page(event) {
	stopX = event.changedTouches[0].pageX;
	stopY = event.changedTouches[0].pageY;
	let moveX = stopX-startX;
	if (Math.abs(moveX)<20) { return false; };
	if (moveX<0) {
		changeStory('-1');
	} else {
		changeStory('+1');
	};
}
function mouseStart(event){
	if(event.which==1){
		document.getElementsByTagName('body')[0].addEventListener('mouseup',mouseStop,false);
		startX = event.clientX;
	};
}
function mouseStop(event){
	if(event.which==1){
		stopX = event.clientX;
		if(Math.abs(stopX-startX)<20) return false;
		if(startX<stopX) {
			changeStory('+1');
		}else{
			changeStory('-1');
		};
	};
}
var hand = document.getElementsByTagName('body')[0];
hand.addEventListener('keydown', goPage, false);
hand.addEventListener('touchstart', turn_start, false); 
hand.addEventListener('touchend', turn_page, false);
hand.addEventListener('mousedown', mouseStart, false);
if (getCookie('help') != 1) {
	openNav('manage');
	setCookie('help', 1);
}
</script>
</body>
</html>
